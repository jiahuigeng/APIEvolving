{"language": "Python", "library": "Flask", "version": "1.1.4", "python_version": "3.8.10", "problem": "Set up a basic Flask web application that prints 'Hello, World!' on the main page.", "starting_code": "from flask import Flask\n\napp = Flask(__name__)\n\n@app.route('/')\ndef hello_world():\n    # SOLUTION_START\n    pass  # Replace this line\n    # SOLUTION_END\n\nif __name__ == '__main__':\n    import os\n    os.environ['FLASK_ENV'] = 'development'\n    app.run()\n", "solution": "return 'Hello, World!'", "test": "import requests\nfrom threading import Thread\nimport time\n\n# Starting the Flask app in a separate thread\napp = Flask(__name__)\n@app.route('/')\ndef hello_world():\n    return 'Hello, World!'\n\ndef run_app():\n    import os\n    os.environ['FLASK_ENV'] = 'development'\n    app.run(port=5001)\n\n# Start the app\nthread = Thread(target=run_app)\nthread.start()\n\ntime.sleep(2)  # Allow some time for the server to start\n\n# Test\nresponse = requests.get('http://127.0.0.1:5001/')\nassert response.text == 'Hello, World!'\n\n# Cleaning up\nimport os\nos.kill(os.getpid(), 9)\n", "example_id": "Flask-1.1.4-old-1", "expected_output_contains": ["Hello, World!"], "old_api": "FLASK_ENV", "new_api": "debug=True (in run) or --debug (CLI)", "deprecated_in": "2.2.0", "removed_in": "2.3.0"}
{"language": "Python", "library": "Flask", "version": "2.3.0", "python_version": "3.9.7", "problem": "Set up a basic Flask web application that prints 'Hello, World!' on the main page.", "starting_code": "from flask import Flask\n\napp = Flask(__name__)\n\n@app.route('/')\ndef hello_world():\n    # SOLUTION_START\n    pass  # Replace this line\n    # SOLUTION_END\n\nif __name__ == '__main__':\n    app.run(debug=True)\n", "solution": "return 'Hello, World!'", "test": "import requests\nfrom threading import Thread\nimport time\n\n# Starting the Flask app in a separate thread\napp = Flask(__name__)\n@app.route('/')\ndef hello_world():\n    return 'Hello, World!'\n\ndef run_app():\n    app.run(port=5002, debug=True)\n\n# Start the app\nthread = Thread(target=run_app)\nthread.start()\n\ntime.sleep(2)  # Allow some time for the server to start\n\n# Test\nresponse = requests.get('http://127.0.0.1:5002/')\nassert response.text == 'Hello, World!'\n\n# Cleaning up\nimport os\nos.kill(os.getpid(), 9)\n", "example_id": "Flask-2.3.0-new-1", "expected_output_contains": ["Hello, World!"], "old_api": "FLASK_ENV", "new_api": "debug=True (in run) or --debug (CLI)", "deprecated_in": "2.2.0", "removed_in": "2.3.0"}
{"language": "Python", "library": "Flask", "version": "1.1.4", "python_version": "3.8.10", "problem": "Create a web application with a route that returns the client's IP address.", "starting_code": "from flask import Flask, request\n\napp = Flask(__name__)\n\n@app.route('/client-ip')\ndef client_ip():\n    # SOLUTION_START\n    pass  # Replace this line\n    # SOLUTION_END\n\nif __name__ == '__main__':\n    import os\n    os.environ['FLASK_ENV'] = 'development'\n    app.run()\n", "solution": "return request.remote_addr", "test": "import requests\nfrom threading import Thread\nimport time\n\napp = Flask(__name__)\n@app.route('/client-ip')\ndef client_ip():\n    return request.remote_addr\n\ndef run_app():\n    import os\n    os.environ['FLASK_ENV'] = 'development'\n    app.run(port=5003)\n\nthread = Thread(target=run_app)\nthread.start()\n\ntime.sleep(2)\n\nresponse = requests.get('http://127.0.0.1:5003/client-ip')\nassert response.text == '127.0.0.1'\n\nimport os\nos.kill(os.getpid(), 9)\n", "example_id": "Flask-1.1.4-old-2", "expected_output_contains": ["127.0.0.1"], "old_api": "FLASK_ENV", "new_api": "debug=True (in run) or --debug (CLI)", "deprecated_in": "2.2.0", "removed_in": "2.3.0"}
{"language": "Python", "library": "Flask", "version": "2.3.0", "python_version": "3.9.7", "problem": "Create a web application with a route that returns the client's IP address.", "starting_code": "from flask import Flask, request\n\napp = Flask(__name__)\n\n@app.route('/client-ip')\ndef client_ip():\n    # SOLUTION_START\n    pass  # Replace this line\n    # SOLUTION_END\n\nif __name__ == '__main__':\n    app.run(debug=True)\n", "solution": "return request.remote_addr", "test": "import requests\nfrom threading import Thread\nimport time\n\napp = Flask(__name__)\n@app.route('/client-ip')\ndef client_ip():\n    return request.remote_addr\n\ndef run_app():\n    app.run(port=5004, debug=True)\n\nthread = Thread(target=run_app)\nthread.start()\n\ntime.sleep(2)\n\nresponse = requests.get('http://127.0.0.1:5004/client-ip')\nassert response.text == '127.0.0.1'\n\nimport os\nos.kill(os.getpid(), 9)\n", "example_id": "Flask-2.3.0-new-2", "expected_output_contains": ["127.0.0.1"], "old_api": "FLASK_ENV", "new_api": "debug=True (in run) or --debug (CLI)", "deprecated_in": "2.2.0", "removed_in": "2.3.0"}
{"language": "Python", "library": "Flask", "version": "1.1.4", "python_version": "3.8.10", "problem": "Display a welcome message the first time the server starts.", "starting_code": "from flask import Flask\n\napp = Flask(__name__)\n\n@app.route('/')\ndef home():\n    return 'Hello, World!'\n\n# SOLUTION_START\n@app.before_first_request\ndef before_first_request():\n    print('Welcome to our Flask application!')\n# SOLUTION_END\n\nif __name__ == '__main__':\n    app.run(debug=True)", "solution": "# SOLUTION_START\n@app.before_first_request\ndef before_first_request():\n    print('Welcome to our Flask application!')\n# SOLUTION_END", "test": "def test_before_first_request_behavior():\n    import os\n    from subprocess import Popen, PIPE\n    import time\n\n    # Start the Flask app\n    proc = Popen(['python', 'app.py'], stdout=PIPE, stderr=PIPE)\n    time.sleep(1)  # Give time to start\n\n    # Check output\n    stdout, stderr = proc.communicate()\n    assert b'Welcome to our Flask application!' in stderr, 'The welcome message is not printed as expected.'\n\n    # Cleanup\n    proc.terminate()\n    proc.wait()\n\ntest_before_first_request_behavior()", "example_id": "Flask-1.1.4-old-1", "expected_output_contains": ["Welcome to our Flask application!"], "old_api": "flask.Flask.before_first_request", "new_api": "Setup code at creation", "deprecated_in": "2.2.0", "removed_in": "2.3.0"}
{"language": "Python", "library": "Flask", "version": "2.3.0", "python_version": "3.8.10", "problem": "Display a welcome message the first time the server starts.", "starting_code": "from flask import Flask\n\n# SOLUTION_START\ndef before_first_request():\n    print('Welcome to our Flask application!')\n\napp = Flask(__name__)\nbefore_first_request()\n# SOLUTION_END\n\n@app.route('/')\ndef home():\n    return 'Hello, World!'\n\nif __name__ == '__main__':\n    app.run(debug=True)", "solution": "# SOLUTION_START\ndef before_first_request():\n    print('Welcome to our Flask application!')\n\napp = Flask(__name__)\nbefore_first_request()\n# SOLUTION_END", "test": "def test_before_first_request_behavior():\n    import os\n    from subprocess import Popen, PIPE\n    import time\n\n    # Start the Flask app\n    proc = Popen(['python', 'app.py'], stdout=PIPE, stderr=PIPE)\n    time.sleep(1)  # Give time to start\n\n    # Check output\n    stdout, stderr = proc.communicate()\n    assert b'Welcome to our Flask application!' in stderr, 'The welcome message is not printed as expected.'\n\n    # Cleanup\n    proc.terminate()\n    proc.wait()\n\ntest_before_first_request_behavior()", "example_id": "Flask-2.3.0-new-1", "expected_output_contains": ["Welcome to our Flask application!"], "old_api": "flask.Flask.before_first_request", "new_api": "Setup code at creation", "deprecated_in": "2.2.0", "removed_in": "2.3.0"}
{"language": "Python", "library": "Flask", "version": "1.1.4", "python_version": "3.8.10", "problem": "Initialize a counter variable when the Flask application starts.", "starting_code": "from flask import Flask\n\napp = Flask(__name__)\ncounter = None\n\n@app.route('/')\ndef home():\n    global counter\n    counter += 1\n    return f'Counter: {counter}'\n\n# SOLUTION_START\n@app.before_first_request\ndef initialize_counter():\n    global counter\n    counter = 0\n# SOLUTION_END\n\nif __name__ == '__main__':\n    app.run(debug=True)", "solution": "# SOLUTION_START\n@app.before_first_request\ndef initialize_counter():\n    global counter\n    counter = 0\n# SOLUTION_END", "test": "def test_initialize_counter_behavior():\n    import os\n    from subprocess import Popen, PIPE\n    import time\n    import requests\n\n    # Start the Flask app\n    proc = Popen(['python', 'app.py'], stdout=PIPE, stderr=PIPE)\n    time.sleep(1)  # Give time to start\n\n    # Make a request to trigger counter\n    response = requests.get('http://localhost:5000/')\n    assert 'Counter: 1' in response.text, 'Counter was not initialized correctly.'\n    \n    # Cleanup\n    proc.terminate()\n    proc.wait()\n\ntest_initialize_counter_behavior()", "example_id": "Flask-1.1.4-old-2", "expected_output_contains": ["Counter: 1"], "old_api": "flask.Flask.before_first_request", "new_api": "Setup code at creation", "deprecated_in": "2.2.0", "removed_in": "2.3.0"}
{"language": "Python", "library": "Flask", "version": "2.3.0", "python_version": "3.8.10", "problem": "Initialize a counter variable when the Flask application starts.", "starting_code": "from flask import Flask\n\n# SOLUTION_START\ncounter = 0\n\napp = Flask(__name__)\n# SOLUTION_END\n\n@app.route('/')\ndef home():\n    global counter\n    counter += 1\n    return f'Counter: {counter}'\n\nif __name__ == '__main__':\n    app.run(debug=True)", "solution": "# SOLUTION_START\ncounter = 0\n\napp = Flask(__name__)\n# SOLUTION_END", "test": "def test_initialize_counter_behavior():\n    import os\n    from subprocess import Popen, PIPE\n    import time\n    import requests\n\n    # Start the Flask app\n    proc = Popen(['python', 'app.py'], stdout=PIPE, stderr=PIPE)\n    time.sleep(1)  # Give time to start\n\n    # Make a request to trigger counter\n    response = requests.get('http://localhost:5000/')\n    assert 'Counter: 1' in response.text, 'Counter was not initialized correctly.'\n    \n    # Cleanup\n    proc.terminate()\n    proc.wait()\n\ntest_initialize_counter_behavior()", "example_id": "Flask-2.3.0-new-2", "expected_output_contains": ["Counter: 1"], "old_api": "flask.Flask.before_first_request", "new_api": "Setup code at creation", "deprecated_in": "2.2.0", "removed_in": "2.3.0"}
